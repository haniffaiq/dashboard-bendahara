"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[59],{93023:function(e,t,n){n.d(t,{d:function(){return l},z:function(){return u}});var r=n(57437),a=n(2265),o=n(67256),i=n(39213),s=n(39311);let l=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=a.forwardRef((e,t)=>{let{className:n,variant:a,size:i,asChild:u=!1,...c}=e,d=u?o.g7:"button";return(0,r.jsx)(d,{className:(0,s.cn)(l({variant:a,size:i,className:n})),ref:t,...c})});u.displayName="Button"},72894:function(e,t,n){n.d(t,{k:function(){return d}});var r,a=n(62601);let o=null!==(r=a.env.NEXT_PUBLIC_API_BASE_URL)&&void 0!==r?r:"https://katar.haniffaiq.com",i="auth.token",s="auth.user";async function l(e,t){var n,r;let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e4,i=new AbortController,s=setTimeout(()=>i.abort(),a);try{let r=await fetch("".concat(o).concat(e),{...t,headers:{"Content-Type":"application/json",...null!==(n=null==t?void 0:t.headers)&&void 0!==n?n:{}},signal:i.signal});if(!r.ok){let e=await r.text().catch(()=>"");throw Error("HTTP ".concat(r.status," ").concat(r.statusText," â€” ").concat(e))}if(204===r.status)return;return await r.json()}catch(n){let t=(null==n?void 0:n.name)==="AbortError"?"Request timeout/aborted":null!==(r=null==n?void 0:n.message)&&void 0!==r?r:String(n);throw console.error("[authAPI] fetch failed:",{url:"".concat(o).concat(e),details:t,hint:"Cek CORS / BASE_URL / HTTPS vs HTTP / API up?"}),n}finally{clearTimeout(s)}}function u(e){localStorage.setItem(i,e)}function c(e){e?localStorage.setItem(s,JSON.stringify(e)):localStorage.removeItem(s)}let d={async login(e,t){var n;let r=await l("/v1/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})});if(!(null==r?void 0:r.token))throw Error("Login gagal: token tidak diterima");u(r.token);let a=null!==(n=r.user)&&void 0!==n?n:null;return c(a),{user:a,token:r.token}},async register(e,t,n,r){var a,o;let i=await l("/v1/auth/register",{method:"POST",body:JSON.stringify({name:e,email:t,password:n,role:r})}),s=null!==(a=null==i?void 0:i.token)&&void 0!==a?a:null,d=null!==(o=null==i?void 0:i.user)&&void 0!==o?o:null;return s&&u(s),c(d),{user:d,token:s}},async getCurrentUser(){let e=function(){let e=localStorage.getItem(s);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}}();return e||null},logout(){localStorage.removeItem(i),c(null)},getToken:function(){return localStorage.getItem(i)}}},39311:function(e,t,n){n.d(t,{cn:function(){return o}});var r=n(57042),a=n(74769);function o(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,a.m6)((0,r.W)(t))}},15463:function(e,t,n){n.d(t,{k:function(){return s}});var r=n(59115),a=n(74810),o=n(72894);JSON.parse('[{"id":"user-1","name":"Ahmad finance","email":"finance","role":"finance","passwordHash":"h0:$2a$10$hash_11_pas","createdAt":"2024-01-15T08:00:00Z"},{"id":"user-2","name":"Siti writer","email":"writer","role":"writer","passwordHash":"h0:$2a$10$hash_11_pas","createdAt":"2024-01-16T08:00:00Z"},{"id":"user-3","name":"Budi user","email":"user1","role":"user","passwordHash":"h0:$2a$10$hash_11_pas","createdAt":"2024-01-17T08:00:00Z"},{"id":"user-4","name":"Rina user","email":"user2","role":"user","passwordHash":"h0:$2a$10$hash_11_pas","createdAt":"2024-01-18T08:00:00Z"},{"id":"user-5","name":"Doni user","email":"user3","role":"user","passwordHash":"h0:$2a$10$hash_11_pas","createdAt":"2024-01-19T08:00:00Z"}]');let i=e=>{localStorage.setItem("internal_auth_session",JSON.stringify(e))},s=(0,r.U)()((0,a.tJ)((e,t)=>({user:null,token:null,isAuthenticated:!1,isLoading:!0,async login(t,n){let{user:r,token:a}=await o.k.login(t,n);e({user:null!=r?r:null,token:null!=a?a:null,isAuthenticated:!!a,isLoading:!1})},setSession(t,n){e({user:t,token:n,isAuthenticated:!!n,isLoading:!1})},register:async(t,n,r,a)=>{try{let s=await o.k.register(t,n,r,a),l={user:s.user,token:s.token,isAuthenticated:!0};i(s),e(l)}catch(e){throw e}},logout(){o.k.logout(),e({user:null,token:null,isAuthenticated:!1,isLoading:!1})}}),{name:"session-storage",partialize:e=>({user:e.user,token:e.token,isAuthenticated:e.isAuthenticated}),onRehydrateStorage:()=>(e,t)=>{queueMicrotask(()=>{var t;let n=e||get(),r=!!(null==n?void 0:n.token),a=s.getState?s:null;null==a||null===(t=a.setState)||void 0===t||t.call(a,{isAuthenticated:r,isLoading:!1})})}}))}}]);