(()=>{var e={};e.id=146,e.ids=[146],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},47895:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>n.a,__next_app__:()=>h,originalPathname:()=>x,pages:()=>m,routeModule:()=>u,tree:()=>o});var r=a(73137),t=a(54647),i=a(4183),n=a.n(i),l=a(71775),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);a.d(s,c);let d=r.AppPageRouteModule,o=["",{children:["anggota",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,3512)),"/Users/hanif/Desktop/Project/Portofolio/Dashboard/finance-dashboard/app/anggota/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,68066)),"/Users/hanif/Desktop/Project/Portofolio/Dashboard/finance-dashboard/app/layout.tsx"],error:[()=>Promise.resolve().then(a.bind(a,11386)),"/Users/hanif/Desktop/Project/Portofolio/Dashboard/finance-dashboard/app/error.tsx"],"not-found":[()=>Promise.resolve().then(a.bind(a,53586)),"/Users/hanif/Desktop/Project/Portofolio/Dashboard/finance-dashboard/app/not-found.tsx"]}],m=["/Users/hanif/Desktop/Project/Portofolio/Dashboard/finance-dashboard/app/anggota/page.tsx"],x="/anggota/page",h={require:a,loadChunk:()=>Promise.resolve()},u=new d({definition:{kind:t.x.APP_PAGE,page:"/anggota/page",pathname:"/anggota",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},28121:(e,s,a)=>{Promise.resolve().then(a.bind(a,88101))},88101:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>z});var r=a(60080),t=a(9885),i=a(68384),n=a(97052),l=a(75271),c=a(37049),d=a(24796),o=a(54747),m=a(91672),x=a(78260),h=a(26303),u=a(57620),p=a(25306);function j({members:e,onEdit:s,onDelete:a,isLoading:n}){let{user:l}=(0,u.k)(),[j,f]=(0,t.useState)("joinedAt"),[g,b]=(0,t.useState)("desc"),v=!!l&&(0,p.mA)(l.role),N=e=>{e===j?b("asc"===g?"desc":"asc"):(f(e),b("desc"))},y=[...e].sort((e,s)=>{let a=e[j],r=s[j];return a<r?"asc"===g?-1:1:a>r?"asc"===g?1:-1:0});return n?r.jsx("div",{className:"flex items-center justify-center py-8",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):0===e.length?(0,r.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[r.jsx(m.Z,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),r.jsx("p",{children:"Belum ada user"})]}):r.jsx("div",{className:"border rounded-lg",children:(0,r.jsxs)(o.iA,{children:[r.jsx(o.xD,{children:(0,r.jsxs)(o.SC,{children:[(0,r.jsxs)(o.ss,{className:"cursor-pointer hover:bg-muted",onClick:()=>N("name"),children:["Nama ","name"===j&&("asc"===g?"↑":"↓")]}),(0,r.jsxs)(o.ss,{className:"cursor-pointer hover:bg-muted",onClick:()=>N("email"),children:["Email ","email"===j&&("asc"===g?"↑":"↓")]}),(0,r.jsxs)(o.ss,{className:"cursor-pointer hover:bg-muted",onClick:()=>N("role"),children:["Peran ","role"===j&&("asc"===g?"↑":"↓")]}),(0,r.jsxs)(o.ss,{className:"cursor-pointer hover:bg-muted",onClick:()=>N("status"),children:["Status ","status"===j&&("asc"===g?"↑":"↓")]}),(0,r.jsxs)(o.ss,{className:"cursor-pointer hover:bg-muted",onClick:()=>N("joinedAt"),children:["Bergabung ","joinedAt"===j&&("asc"===g?"↑":"↓")]}),v&&r.jsx(o.ss,{children:"Aksi"})]})}),r.jsx(o.RM,{children:y.map(e=>(0,r.jsxs)(o.SC,{children:[r.jsx(o.pj,{className:"font-medium",children:e.name}),r.jsx(o.pj,{children:e.email}),r.jsx(o.pj,{children:r.jsx(d.C,{variant:"admin"===e.role?"default":"finance"===e.role?"secondary":"outline",children:e.role})}),r.jsx(o.pj,{children:r.jsx(d.C,{variant:"AKTIF"===e.status?"default":"destructive",children:e.status})}),r.jsx(o.pj,{className:"font-mono",children:(0,c.p6)(e.joinedAt)}),v&&r.jsx(o.pj,{children:(0,r.jsxs)("div",{className:"flex gap-6",children:[r.jsx(i.z,{variant:"ghost",size:"sm",onClick:()=>s?.(e),children:r.jsx(x.Z,{className:"h-4 w-4"})}),r.jsx(i.z,{variant:"ghost",size:"sm",onClick:()=>a?.(e.id),children:r.jsx(h.Z,{className:"h-4 w-4"})})]})})]},e.id))})]})})}var f=a(66558),g=a(83894),b=a(19098),v=a(49424),N=a(33478),y=a(70589),k=a(45290),w=a(51839),P=a(87502);let S=b.z.object({name:b.z.string().min(1,"Nama harus diisi"),email:b.z.string().email("Email tidak valid"),role:b.z.enum(["admin","user","finance","writer"]),status:b.z.enum(["AKTIF","NONAKTIF"])});function A({isOpen:e,onClose:s,onSubmit:a,member:t}){let{toast:n}=(0,P.pm)(),l=(0,f.cI)({resolver:(0,g.F)(S),defaultValues:{name:t?.name||"",email:t?.email||"",role:t?.role||"user",status:t?.status||"AKTIF"}}),c=async e=>{try{await a(e),s(),l.reset(),n({title:t?"user diperbarui":"user ditambahkan",description:"Data user berhasil disimpan."})}catch(e){n({title:"Terjadi kesalahan",description:e.message||"Gagal menyimpan data user.",variant:"destructive"})}};return r.jsx(w.Vq,{open:e,onOpenChange:s,children:(0,r.jsxs)(w.cZ,{className:"max-w-md",children:[r.jsx(w.fK,{children:r.jsx(w.$N,{children:t?"Edit user":"Tambah user"})}),(0,r.jsxs)("form",{onSubmit:l.handleSubmit(c),className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(N._,{htmlFor:"name",children:"Nama"}),r.jsx(v.I,{id:"name",placeholder:"Masukkan nama lengkap",...l.register("name")}),l.formState.errors.name&&r.jsx("p",{className:"text-sm text-destructive",children:l.formState.errors.name.message})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(N._,{htmlFor:"email",children:"Email"}),r.jsx(v.I,{id:"email",type:"email",placeholder:"nama@email.com",...l.register("email")}),l.formState.errors.email&&r.jsx("p",{className:"text-sm text-destructive",children:l.formState.errors.email.message})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(N._,{htmlFor:"role",children:"Peran"}),(0,r.jsxs)(y.Ph,{value:l.watch("role"),onValueChange:e=>l.setValue("role",e),children:[r.jsx(y.i4,{children:r.jsx(y.ki,{placeholder:"Pilih peran"})}),r.jsx(y.Bw,{children:r.jsx(y.Ql,{value:"user",children:"user"})})]}),l.formState.errors.role&&r.jsx("p",{className:"text-sm text-destructive",children:l.formState.errors.role.message})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[r.jsx(N._,{children:"Status"}),(0,r.jsxs)(k.E,{value:l.watch("status"),onValueChange:e=>l.setValue("status",e),className:"flex gap-2",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx(k.m,{value:"AKTIF",id:"aktif"}),r.jsx(N._,{htmlFor:"aktif",children:"Aktif"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx(k.m,{value:"NONAKTIF",id:"nonaktif"}),r.jsx(N._,{htmlFor:"nonaktif",children:"Non-Aktif"})]})]}),l.formState.errors.status&&r.jsx("p",{className:"text-sm text-destructive",children:l.formState.errors.status.message})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[r.jsx(i.z,{type:"button",variant:"outline",onClick:s,children:"Batal"}),r.jsx(i.z,{type:"submit",disabled:l.formState.isSubmitting,children:l.formState.isSubmitting?"Menyimpan...":"Simpan"})]})]})]})})}var _=a(74387),C=a(33411),D=a(88944),T=a(79937);let F=(0,D.U)((e,s)=>({members:[],isLoading:!1,fetchMembers:async()=>{e({isLoading:!0});try{let s=await T.p7.list();e({members:s,isLoading:!1})}catch(s){throw e({isLoading:!1}),s}},createMember:async a=>{let r=await T.p7.create(a),t=[r,...s().members];return e({members:t}),r},updateMember:async(a,r)=>{let t=await T.p7.update(a,r),i=s().members.map(e=>e.id===a?t:e);return e({members:i}),t},deleteMember:async a=>{await T.p7.delete(a);let r=s().members.filter(e=>e.id!==a);e({members:r})}}));var Z=a(22385);function z(){let{user:e}=(0,u.k)(),{members:s,isLoading:a,fetchMembers:c,createMember:d,updateMember:o,deleteMember:x}=F(),{toast:h}=(0,P.pm)(),[f,g]=(0,t.useState)(!1),[b,v]=(0,t.useState)(),[N,y]=(0,t.useState)(null),k=!!e&&(0,p.cW)(e.role);(0,t.useEffect)(()=>{c()},[]);let w=async e=>{try{await d(e),g(!1)}catch(e){throw e}},S=async e=>{if(b)try{await o(b.id,e),v(void 0),g(!1)}catch(e){throw e}},D=async()=>{if(N)try{await x(N),y(null),h({title:"user dihapus",description:"Data user berhasil dihapus."})}catch(e){h({title:"Terjadi kesalahan",description:"Gagal menghapus data user.",variant:"destructive"})}},T=s.filter(e=>"AKTIF"===e.status).length,z=s.filter(e=>"NONAKTIF"===e.status).length;return r.jsx(_.i,{children:(0,r.jsxs)("div",{className:"flex",children:[r.jsx(C.Y,{}),r.jsx("div",{className:"mx-auto w-full max-w-screen-xl px-4 sm:px-6 lg:px-8 py-6 space-y-6",children:(0,r.jsxs)("div",{className:"",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-y-3 gap-x-6 flex-wrap",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"user"}),r.jsx("p",{className:"text-muted-foreground",children:"Kelola data user organisasi"})]}),k&&(0,r.jsxs)(i.z,{onClick:()=>g(!0),children:[r.jsx(Z.Z,{className:"h-4 w-4 mr-2"}),"Tambah user"]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)(n.Zb,{children:[(0,r.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(n.ll,{className:"text-sm font-medium",children:"Total user"}),r.jsx(m.Z,{className:"h-4 w-4 text-primary"})]}),r.jsx(n.aY,{children:r.jsx("div",{className:"text-2xl font-bold",children:s.length})})]}),(0,r.jsxs)(n.Zb,{children:[(0,r.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(n.ll,{className:"text-sm font-medium",children:"user Aktif"}),r.jsx(m.Z,{className:"h-4 w-4 text-green-600"})]}),r.jsx(n.aY,{children:r.jsx("div",{className:"text-2xl font-bold text-green-600",children:T})})]}),(0,r.jsxs)(n.Zb,{children:[(0,r.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(n.ll,{className:"text-sm font-medium",children:"user Non-Aktif"}),r.jsx(m.Z,{className:"h-4 w-4 text-red-600"})]}),r.jsx(n.aY,{children:r.jsx("div",{className:"text-2xl font-bold text-red-600",children:z})})]})]}),(0,r.jsxs)(n.Zb,{children:[(0,r.jsxs)(n.Ol,{children:[r.jsx(n.ll,{children:"Daftar user"}),r.jsx(n.SZ,{children:"Daftar semua user dalam organisasi"})]}),r.jsx(n.aY,{children:r.jsx(j,{members:s,onEdit:k?e=>{v(e),g(!0)}:void 0,onDelete:k?e=>{y(e)}:void 0,isLoading:a})})]}),k&&r.jsx(A,{isOpen:f,onClose:()=>{g(!1),v(void 0)},onSubmit:b?S:w,member:b}),r.jsx(l.aR,{open:!!N,onOpenChange:()=>y(null),children:(0,r.jsxs)(l._T,{children:[(0,r.jsxs)(l.fY,{children:[r.jsx(l.f$,{children:"Hapus user"}),r.jsx(l.yT,{children:"Apakah Anda yakin ingin menghapus data user ini? Tindakan ini tidak dapat dibatalkan."})]}),(0,r.jsxs)(l.xo,{children:[r.jsx(l.le,{children:"Batal"}),r.jsx(l.OL,{onClick:D,children:"Hapus"})]})]})})]})})]})})}},3512:(e,s,a)=>{"use strict";a.r(s),a.d(s,{$$typeof:()=>n,__esModule:()=>i,default:()=>c});var r=a(17536);let t=(0,r.createProxy)(String.raw`/Users/hanif/Desktop/Project/Portofolio/Dashboard/finance-dashboard/app/anggota/page.tsx`),{__esModule:i,$$typeof:n}=t,l=t.default,c=l}};var s=require("../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),r=s.X(0,[959,281,408,652,769,312,749,620,259,40,589,874,875],()=>a(47895));module.exports=r})();