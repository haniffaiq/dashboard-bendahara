"use strict";exports.id=620,exports.ids=[620],exports.modules={40665:(e,t,a)=>{a.d(t,{k:()=>i});let s=process.env.NEXT_PUBLIC_API_BASE_URL??"https://katar.haniffaiq.com";async function r(e,t,a=1e4){let r=new AbortController,n=setTimeout(()=>r.abort(),a);try{let a=await fetch(`${s}${e}`,{...t,headers:{"Content-Type":"application/json",...t?.headers??{}},signal:r.signal});if(!a.ok){let e=await a.text().catch(()=>"");throw Error(`HTTP ${a.status} ${a.statusText} â€” ${e}`)}if(204===a.status)return;return await a.json()}catch(a){let t=a?.name==="AbortError"?"Request timeout/aborted":a?.message??String(a);throw console.error("[authAPI] fetch failed:",{url:`${s}${e}`,details:t,hint:"Cek CORS / BASE_URL / HTTPS vs HTTP / API up?"}),a}finally{clearTimeout(n)}}function n(e){localStorage.setItem("auth.token",e)}let i={async login(e,t){let a=await r("/v1/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})});if(!a?.token)throw Error("Login gagal: token tidak diterima");return n(a.token),{user:a.user??null,token:a.token}},async register(e,t,a,s){let i=await r("/v1/auth/register",{method:"POST",body:JSON.stringify({name:e,email:t,password:a,role:s})}),o=i?.token??null,u=i?.user??null;return o&&n(o),{user:u,token:o}},getCurrentUser:async()=>null,logout(){},getToken:function(){return null}}},57620:(e,t,a)=>{a.d(t,{k:()=>o});var s=a(88944),r=a(48228),n=a(40665);JSON.parse('[{"id":"user-1","name":"Ahmad finance","email":"finance","role":"finance","passwordHash":"h0:$2a$10$hash_11_pas","createdAt":"2024-01-15T08:00:00Z"},{"id":"user-2","name":"Siti writer","email":"writer","role":"writer","passwordHash":"h0:$2a$10$hash_11_pas","createdAt":"2024-01-16T08:00:00Z"},{"id":"user-3","name":"Budi user","email":"user1","role":"user","passwordHash":"h0:$2a$10$hash_11_pas","createdAt":"2024-01-17T08:00:00Z"},{"id":"user-4","name":"Rina user","email":"user2","role":"user","passwordHash":"h0:$2a$10$hash_11_pas","createdAt":"2024-01-18T08:00:00Z"},{"id":"user-5","name":"Doni user","email":"user3","role":"user","passwordHash":"h0:$2a$10$hash_11_pas","createdAt":"2024-01-19T08:00:00Z"}]');let i=e=>{},o=(0,s.U)()((0,r.tJ)((e,t)=>({user:null,token:null,isAuthenticated:!1,isLoading:!0,async login(t,a){let{user:s,token:r}=await n.k.login(t,a);e({user:s??null,token:r??null,isAuthenticated:!!r,isLoading:!1})},setSession(t,a){e({user:t,token:a,isAuthenticated:!!a,isLoading:!1})},register:async(t,a,s,r)=>{try{let o=await n.k.register(t,a,s,r),u={user:o.user,token:o.token,isAuthenticated:!0};i(o),e(u)}catch(e){throw e}},logout(){n.k.logout(),e({user:null,token:null,isAuthenticated:!1,isLoading:!1})}}),{name:"session-storage",partialize:e=>({user:e.user,token:e.token,isAuthenticated:e.isAuthenticated}),onRehydrateStorage:()=>(e,t)=>{queueMicrotask(()=>{let t=e||get(),a=!!t?.token,s=o.getState?o:null;s?.setState?.({isAuthenticated:a,isLoading:!1})})}}))}};