(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{28001:function(e,t,s){Promise.resolve().then(s.bind(s,52255))},52255:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return J}});var a=s(57437),l=s(2265),n=s(86110),r=s(93023),i=s(51908),c=s(66672),d=s(58094),o=s(94944),x=s(25792),h=s(45253),m=s(38227),j=s(16573),u=s(24235),f=s(50039),p=s(86812),g=s(19223);function b(e){let{data:t}=e,s=e=>{let[t,s]=e.split("-");return"".concat(["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Agu","Sep","Okt","Nov","Des"][parseInt(s)-1]," ").concat(t)};return(0,a.jsx)("div",{className:"w-full h-[400px]",children:(0,a.jsx)(h.h,{width:"100%",height:"100%",children:(0,a.jsxs)(m.w,{data:t,margin:{top:20,right:30,left:20,bottom:20},children:[(0,a.jsx)(j.q,{strokeDasharray:"3 3",stroke:"#f1f5f9"}),(0,a.jsx)(u.K,{dataKey:"month",tickFormatter:s,fontSize:12,stroke:"#64748b"}),(0,a.jsx)(f.B,{tickFormatter:e=>(0,x.xG)(e),fontSize:12,stroke:"#64748b"}),(0,a.jsx)(p.u,{content:(0,a.jsx)(e=>{let{active:t,payload:l,label:n}=e;if(t&&l&&l.length){let e=l[0].value;return(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-3 shadow-md",children:[(0,a.jsx)("p",{className:"font-medium",children:s(n)}),(0,a.jsxs)("p",{className:"font-semibold ".concat(e>=0?"text-green-600":"text-red-600"),children:["Saldo: ",(0,x.xG)(e)]})]})}return null},{})}),(0,a.jsx)(g.x,{type:"monotone",dataKey:"balance",stroke:"#10b981",strokeWidth:3,dot:{fill:"#10b981",strokeWidth:2,r:5},activeDot:{r:7,stroke:"#10b981",strokeWidth:2,fill:"#ffffff"}})]})})})}var y=s(44909),N=s(79857),v=s(31346);function w(e){let{data:t}=e,s=e=>{let[t,s]=e.split("-");return"".concat(["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Agu","Sep","Okt","Nov","Des"][parseInt(s)-1]," ").concat(t)};return(0,a.jsx)("div",{className:"w-full h-[300px]",children:(0,a.jsx)(h.h,{width:"100%",height:"100%",children:(0,a.jsxs)(y.v,{data:t,margin:{top:20,right:30,left:20,bottom:20},children:[(0,a.jsx)(j.q,{strokeDasharray:"3 3",stroke:"#f1f5f9"}),(0,a.jsx)(u.K,{dataKey:"month",tickFormatter:s,fontSize:12,stroke:"#64748b"}),(0,a.jsx)(f.B,{tickFormatter:e=>(0,x.xG)(e),fontSize:12,stroke:"#64748b"}),(0,a.jsx)(p.u,{content:(0,a.jsx)(e=>{let{active:t,payload:l,label:n}=e;return t&&l&&l.length?(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-3 shadow-md",children:[(0,a.jsx)("p",{className:"font-medium",children:s(n)}),l.map((e,t)=>(0,a.jsxs)("p",{style:{color:e.color},children:["income"===e.dataKey?"Pemasukan":"Pengeluaran",": ",(0,x.xG)(e.value)]},t))]}):null},{})}),(0,a.jsx)(N.D,{formatter:e=>"income"===e?"Pemasukan":"Pengeluaran",wrapperStyle:{paddingTop:"20px"}}),(0,a.jsx)(v.$,{dataKey:"income",fill:"#10b981",name:"income",radius:[4,4,0,0]}),(0,a.jsx)(v.$,{dataKey:"expense",fill:"#ef4444",name:"expense",radius:[4,4,0,0]})]})})})}var k=s(57703),F=s(28485),S=s(36612);let D=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82CA9D","#FFC658","#FF7C7C","#8DD1E1","#D084D0"];function C(e){let{data:t}=e,s=t.reduce((e,t)=>e+t.amount,0),l=t.map(e=>({...e,total:s,percentage:(e.amount/s*100).toFixed(1)}));return(0,a.jsx)("div",{className:"w-full h-[350px]",children:(0,a.jsx)(h.h,{width:"100%",height:"100%",children:(0,a.jsxs)(k.u,{children:[(0,a.jsx)(F.b,{data:l,cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{cx:t,cy:s,midAngle:l,innerRadius:n,outerRadius:r,percent:i}=e;if(i<.05)return null;let c=Math.PI/180,d=n+(r-n)*.5,o=t+d*Math.cos(-l*c);return(0,a.jsx)("text",{x:o,y:s+d*Math.sin(-l*c),fill:"white",textAnchor:o>t?"start":"end",dominantBaseline:"central",fontSize:"12",fontWeight:"bold",children:"".concat((100*i).toFixed(0),"%")})},outerRadius:120,fill:"#8884d8",dataKey:"amount",children:l.map((e,t)=>(0,a.jsx)(S.b,{fill:D[t%D.length]},"cell-".concat(t)))}),(0,a.jsx)(p.u,{content:(0,a.jsx)(e=>{let{active:t,payload:s}=e;if(t&&s&&s.length){let e=s[0].payload;return(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-3 shadow-md",children:[(0,a.jsx)("p",{className:"font-medium",children:e.category}),(0,a.jsx)("p",{className:"text-primary",children:(0,x.xG)(e.amount)}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[(e.amount/e.total*100).toFixed(1),"%"]})]})}return null},{})}),(0,a.jsx)(N.D,{verticalAlign:"bottom",height:36,formatter:(e,t)=>(0,a.jsxs)("span",{style:{color:t.color},children:[e," (",t.payload.percentage,"%)"]})})]})})})}let O=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82CA9D","#FFC658","#FF7C7C","#8DD1E1","#D084D0"];function G(e){let{data:t}=e,s=t.reduce((e,t)=>e+t.amount,0),l=t.map(e=>({...e,total:s,percentage:(e.amount/s*100).toFixed(1)}));return(0,a.jsxs)("div",{className:"w-full h-[350px]",children:[(0,a.jsx)(h.h,{width:"100%",height:"100%",children:(0,a.jsxs)(k.u,{children:[(0,a.jsx)(F.b,{data:l,cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{cx:t,cy:s,midAngle:l,innerRadius:n,outerRadius:r,percent:i}=e;if(i<.05)return null;let c=Math.PI/180,d=n+(r-n)*.5,o=t+d*Math.cos(-l*c);return(0,a.jsx)("text",{x:o,y:s+d*Math.sin(-l*c),fill:"white",textAnchor:o>t?"start":"end",dominantBaseline:"central",fontSize:"12",fontWeight:"bold",children:"".concat((100*i).toFixed(0),"%")})},outerRadius:120,innerRadius:60,fill:"#8884d8",dataKey:"amount",children:l.map((e,t)=>(0,a.jsx)(S.b,{fill:O[t%O.length]},"cell-".concat(t)))}),(0,a.jsx)(p.u,{content:(0,a.jsx)(e=>{let{active:t,payload:s}=e;if(t&&s&&s.length){let e=s[0].payload;return(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-3 shadow-md",children:[(0,a.jsx)("p",{className:"font-medium",children:e.category}),(0,a.jsx)("p",{className:"text-primary",children:(0,x.xG)(e.amount)}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[(e.amount/e.total*100).toFixed(1),"%"]})]})}return null},{})}),(0,a.jsx)(N.D,{verticalAlign:"bottom",height:36,formatter:(e,t)=>(0,a.jsxs)("span",{style:{color:t.color},children:[e," (",t.payload.percentage,"%)"]})})]})}),(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Total"}),(0,a.jsx)("div",{className:"text-lg font-bold",children:(0,x.xG)(s)})]})})]})}var K=s(90045),M=s(51125);function T(e){let{data:t}=e,s=e=>{let[t,s]=e.split("-");return"".concat(["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Agu","Sep","Okt","Nov","Des"][parseInt(s)-1]," ").concat(t)},l=t.some(e=>e.balance<0);return(0,a.jsx)("div",{className:"w-full h-[300px]",children:(0,a.jsx)(h.h,{width:"100%",height:"100%",children:(0,a.jsxs)(K.T,{data:t,margin:{top:10,right:30,left:20,bottom:5},children:[(0,a.jsxs)("defs",{children:[(0,a.jsxs)("linearGradient",{id:"balanceGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.8}),(0,a.jsx)("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:.1})]}),(0,a.jsxs)("linearGradient",{id:"negativeGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"5%",stopColor:"#ef4444",stopOpacity:.8}),(0,a.jsx)("stop",{offset:"95%",stopColor:"#ef4444",stopOpacity:.1})]})]}),(0,a.jsx)(j.q,{strokeDasharray:"3 3"}),(0,a.jsx)(u.K,{dataKey:"month",tickFormatter:s,fontSize:12}),(0,a.jsx)(f.B,{tickFormatter:e=>(0,x.xG)(e),fontSize:12}),(0,a.jsx)(p.u,{content:(0,a.jsx)(e=>{let{active:t,payload:l,label:n}=e;if(t&&l&&l.length){let e=l[0].value;return(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-3 shadow-md",children:[(0,a.jsx)("p",{className:"font-medium",children:s(n)}),(0,a.jsxs)("p",{className:"font-semibold ".concat(e>=0?"text-green-600":"text-red-600"),children:["Saldo: ",(0,x.xG)(e)]})]})}return null},{})}),(0,a.jsx)(M.u,{type:"monotone",dataKey:"balance",stroke:"#10b981",strokeWidth:3,fill:"url(#balanceGradient)",dot:{fill:"#10b981",strokeWidth:2,r:4},activeDot:{r:6,stroke:"#10b981",strokeWidth:2}}),l&&(0,a.jsx)(g.x,{type:"monotone",dataKey:()=>0,stroke:"#64748b",strokeDasharray:"5 5",dot:!1})]})})})}var Z=s(50239),A=s(74828),z=s(64280),P=s(42482),Y=s(85790),B=s(74522),I=s(41298),E=s(93887);function J(){let[e,t]=(0,l.useState)(null),[s,h]=(0,l.useState)(null),[m,j]=(0,l.useState)(!0),[u,f]=(0,l.useState)(!1),[p,g]=(0,l.useState)(""),[y,N]=(0,l.useState)(""),[v,k]=(0,l.useState)([]),[F,S]=(0,l.useState)(void 0);(0,l.useEffect)(()=>{let e=new Date,t=new Date(e.getFullYear()-1,e.getMonth(),1);g(t.toISOString().split("T")[0]),N(e.toISOString().split("T")[0])},[]),(0,l.useEffect)(()=>{p&&(D(),O())},[p,y,F]);let D=async()=>{try{e?f(!0):j(!0);let[s,a]=await Promise.all([o.sz.getSummary(p,y),o.sz.getChartData(p,y)]);t(s),h(a)}catch(e){console.error("Failed to load dashboard data:",e)}finally{j(!1),f(!1)}},O=async()=>{try{let e=await o.sz.getCategories();k(e.filter(Boolean))}catch(e){console.error("Failed to load categories:",e)}};return m?(0,a.jsx)(Z.i,{children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(A.Y,{}),(0,a.jsx)("div",{className:"flex-1 min-h-screen bg-gray-50/50",children:(0,a.jsx)("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8",children:(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Memuat data dashboard..."})]})})})})]})}):(0,a.jsx)(Z.i,{children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(A.Y,{}),(0,a.jsx)("div",{className:"mx-auto w-full max-w-screen-xl px-4 sm:px-6 lg:px-8 py-6 space-y-6",children:(0,a.jsxs)("div",{className:"",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight",children:"Dashboard"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Ringkasan keuangan dan statistik organisasi"})]}),(0,a.jsxs)(r.z,{onClick:()=>{D()},disabled:u,variant:"outline",size:"sm",children:[(0,a.jsx)(z.Z,{className:"h-4 w-4 mr-2 ".concat(u?"animate-spin":"")}),u?"Memuat...":"Refresh"]})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsx)(n.Ol,{children:(0,a.jsxs)(n.ll,{className:"text-lg flex items-center gap-2",children:[(0,a.jsx)(P.Z,{className:"h-5 w-5"}),"Filter Data"]})}),(0,a.jsx)(n.aY,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 items-end",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(c._,{htmlFor:"dateFrom",children:"Tanggal Mulai"}),(0,a.jsx)(i.I,{id:"dateFrom",type:"date",value:p,onChange:e=>g(e.target.value),className:"mt-1"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c._,{htmlFor:"dateTo",children:"Tanggal Akhir"}),(0,a.jsx)(i.I,{id:"dateTo",type:"date",value:y,onChange:e=>N(e.target.value),className:"mt-1"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c._,{htmlFor:"category",children:"Kategori"}),(0,a.jsxs)(d.Ph,{value:F,onValueChange:e=>{"ALL"===e?S(void 0):S(e)},children:[(0,a.jsx)(d.i4,{className:"mt-1",children:(0,a.jsx)(d.ki,{placeholder:"Semua kategori"})}),(0,a.jsxs)(d.Bw,{children:[(0,a.jsx)(d.Ql,{value:"ALL",children:"Semua kategori"}),v.map(e=>(0,a.jsx)(d.Ql,{value:e,children:e},e))]})]})]}),(0,a.jsx)("div",{children:(0,a.jsx)(r.z,{variant:"outline",onClick:()=>{S(void 0);let e=new Date,t=new Date(e.getFullYear()-1,e.getMonth(),1);g(t.toISOString().split("T")[0]),N(e.toISOString().split("T")[0])},className:"w-full",children:"Reset Filter"})})]})})]}),e&&(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(n.ll,{className:"text-sm font-medium",children:"Total Pemasukan"}),(0,a.jsx)(Y.Z,{className:"h-4 w-4 text-green-600"})]}),(0,a.jsx)(n.aY,{children:(0,a.jsx)("div",{className:"text-xl sm:text-2xl font-bold text-green-600",children:(0,x.xG)(e.totalIncome)})})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(n.ll,{className:"text-sm font-medium",children:"Total Pengeluaran"}),(0,a.jsx)(B.Z,{className:"h-4 w-4 text-red-600"})]}),(0,a.jsx)(n.aY,{children:(0,a.jsx)("div",{className:"text-xl sm:text-2xl font-bold text-red-600",children:(0,x.xG)(e.totalExpense)})})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(n.ll,{className:"text-sm font-medium",children:"Saldo"}),(0,a.jsx)(I.Z,{className:"h-4 w-4 text-primary"})]}),(0,a.jsx)(n.aY,{children:(0,a.jsx)("div",{className:"text-xl sm:text-2xl font-bold ".concat(e.balance>=0?"text-green-600":"text-red-600"),children:(0,x.xG)(e.balance)})})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(n.ll,{className:"text-sm font-medium",children:"Total Transaksi"}),(0,a.jsx)(E.Z,{className:"h-4 w-4 text-primary"})]}),(0,a.jsx)(n.aY,{children:(0,a.jsx)("div",{className:"text-xl sm:text-2xl font-bold",children:e.transactionCount})})]})]}),s&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(n.Zb,{children:[(0,a.jsx)(n.Ol,{children:(0,a.jsx)(n.ll,{children:"Trend Saldo Bulanan"})}),(0,a.jsx)(n.aY,{children:(0,a.jsx)(T,{data:s.monthly.map(e=>({month:e.month,balance:e.balance}))})})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsx)(n.Ol,{children:(0,a.jsx)(n.ll,{children:"Pemasukan vs Pengeluaran"})}),(0,a.jsx)(n.aY,{children:(0,a.jsx)(w,{data:s.monthly.map(e=>({month:e.month,income:e.income,expense:e.expense}))})})]})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsx)(n.Ol,{children:(0,a.jsx)(n.ll,{children:"Grafik Saldo Kumulatif"})}),(0,a.jsx)(n.aY,{children:(0,a.jsx)(b,{data:s.monthly.map(e=>({month:e.month,balance:e.balance}))})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(n.Zb,{children:[(0,a.jsx)(n.Ol,{children:(0,a.jsx)(n.ll,{children:"Distribusi Kategori (Pie Chart)"})}),(0,a.jsx)(n.aY,{children:(0,a.jsx)(C,{data:s.categories})})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsx)(n.Ol,{children:(0,a.jsx)(n.ll,{children:"Distribusi Kategori (Donut Chart)"})}),(0,a.jsx)(n.aY,{children:(0,a.jsx)(G,{data:s.categories})})]})]})]})]})})]})})}}},function(e){e.O(0,[237,724,232,769,317,910,59,65,971,864,744],function(){return e(e.s=28001)}),_N_E=e.O()}]);